---
description: Describe el método de autenticación simplificado propio de Misskey, disponible a partir de v12.27.0.
---

# Obteniendo un Token de Acceso a través de MiAuth

Para obtener un token de acceso para los usuarios (en adelante denominados simplemente "usuarios") que utilizarán tu aplicación, sigue estos pasos:

:::tip

El método descrito a continuación se llama MiAuth, que permite la emisión instantánea de tokens de acceso sin crear una aplicación.

- [También existe un método OAuth más utilizado para obtener tokens de acceso.](./oauth.md)
- [También puedes obtener tokens de acceso a través del método de creación de aplicaciones (método heredado).](./app.md)

:::

## Paso 1

Genera un UUID.Se utilizará como **ID de sesión**.

:::danger

Genera un nuevo identificador de sesión cada vez y no lo reutilices.

:::

## Paso 2

Mostrar el formulario de autenticación de la aplicación en el navegador del usuario.Puedes abrir el formulario de autenticación utilizando una URL con el siguiente formato:

```
https://{host}/miauth/{session}
```

Aquí

- Sustituye `{host}` por el nombre del servidor del usuario.Normalmente, el host lo introduce el usuario.
- Sustituye `{session}` por el ID de la sesión.

También puede establecer varias opciones como parámetros de consulta en la URL:

| Nombre       | Descripción                                                                                                                                                                                                |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`       | El nombre de la aplicación                                                                                                                                                                                 |
| `icon`       | La URL de la imagen del icono de la aplicación.                                                                                                                                            |
| `callback`   | La URL a la que redirigir después de la autenticación.<br>El ID de sesión se añadirá como parámetro de consulta `session` en la redirección.                               |
| `permission` | Los permisos requeridos por la aplicación.<br>Enumera los permisos necesarios separados por comas.Comprueba la lista de permisos [aquí](../permission.md). |

:::tip{label='例'}

```
https://misskey.example/miauth/c1f6d42b-468b-4fd2-8274-e58abdedef6f?name=MyApp&callback=https%3A%2F%2Fmyapp.example.com%2Fcallback&permission=write:notes,write:following,read:drive
```

:::

## Paso 3

Después de que el usuario conceda acceso a la aplicación, realiza una solicitud POST a una URL con el siguiente formato para recibir una respuesta JSON que contenga el token de acceso.

```
https://{host}/api/miauth/{session}/check
```

Aquí

- Sustituye `{host}` por el nombre  del servidor del usuario.
- Sustituye `{session}` por el ID de la sesión.

Las propiedades incluidas en la respuesta son:.

| Nombre  | Descripción                                   |
| ------- | --------------------------------------------- |
| `token` | El token de acceso del usuario                |
| `user`  | Información sobre el usuario. |
